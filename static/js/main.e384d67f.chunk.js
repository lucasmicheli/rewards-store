(this["webpackJsonpstore-micheli-lucas"]=this["webpackJsonpstore-micheli-lucas"]||[]).push([[0],{15:function(e,t,c){},16:function(e,t,c){"use strict";c.r(t);var s=c(0),n=(c(10),c(1)),r=c.n(n),a=c(7),i=c.n(a),o=c(2),l={"Content-Type":"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI2MGI2YWY1YjliNzc4MTAwMjA5YzVhYjEiLCJpYXQiOjE2MjI1ODUxNzl9.BPrJi9VtcXmjz3DaeiW7IKcX6EawZHZpnVaNbwnxMn0"},u=1e3,d=5e3,j=7500,b="https://coding-challenge-api.aerolab.co/user/me",h="https://coding-challenge-api.aerolab.co/products",m="https://coding-challenge-api.aerolab.co/redeem",x="https://coding-challenge-api.aerolab.co/user/points",O=c(3),p=c.n(O),f=c(4);function v(){return(v=Object(f.a)(p.a.mark((function e(t){var c,s;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(x,{method:"POST",headers:l,body:JSON.stringify({amount:t})});case 3:return c=e.sent,e.next=6,c.json();case 6:return s=e.sent,e.abrupt("return",s);case 10:e.prev=10,e.t0=e.catch(0),console.log("Error: ",e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}var N=function(e){return v.apply(this,arguments)};function g(){return(g=Object(f.a)(p.a.mark((function e(){var t,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(b,{method:"GET",headers:l});case 3:return t=e.sent,e.next=6,t.json();case 6:return c=e.sent,e.abrupt("return",c);case 10:e.prev=10,e.t0=e.catch(0),console.log("Error: ",e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}var y=function(){return g.apply(this,arguments)},w=r.a.createContext(),C=function(e){var t=r.a.useState({}),c=Object(o.a)(t,2),n=c[0],a=c[1],i=r.a.useState(0),l=Object(o.a)(i,2),u=l[0],d=l[1],j=r.a.useState(!1),b=Object(o.a)(j,2),h=b[0],m=b[1],x=r.a.useState([]),O=Object(o.a)(x,2),p=O[0],f=O[1];return r.a.useEffect((function(){y().then((function(e){a(e),d(e.points),f(e.redeemHistory)}))}),[]),Object(s.jsx)(w.Provider,{value:{users:n,setUsers:a,points:u,setPoints:d,history:h,setHistory:m,record:p},children:e.children})},k=c.p+"static/media/coin.545a8a71.svg";var P=function(e){var t=r.a.useState(!1),c=Object(o.a)(t,2),n=c[0],a=c[1],i=r.a.useContext(w),l=i.points,b=i.setPoints;r.a.useEffect((function(){n&&setTimeout((function(){a(!1)}),2e3)}),[n]);var h=function(e){N(e).then((function(t){b(l+e),a(!0)}))};return Object(s.jsxs)("div",{className:"modal-screen",children:[Object(s.jsx)("div",{className:"successAddPointsDiv",children:n&&Object(s.jsx)("div",{className:"successEnabled successAddPoints",children:Object(s.jsx)("h6",{className:"success-p",children:" Points added successfully "})})}),Object(s.jsxs)("section",{className:"addCoins",children:[Object(s.jsx)("h4",{className:"title-addCoins",children:" Add more coins "}),Object(s.jsxs)("button",{className:"button-addCoins one",onClick:function(){return h(u)},children:[Object(s.jsx)("img",{src:k,alt:u}),u]}),Object(s.jsxs)("button",{className:"button-addCoins two",onClick:function(){return h(d)},children:[Object(s.jsx)("img",{src:k,alt:d}),d]}),Object(s.jsxs)("button",{className:"button-addCoins three",onClick:function(){return h(j)},children:[Object(s.jsx)("img",{src:k,alt:j}),j]}),Object(s.jsx)("button",{className:"close",onClick:function(){return e.setModal(!1)},children:" X "})]})]})};var S=function(){var e=r.a.useState(!1),t=Object(o.a)(e,2),c=t[0],n=t[1],a=r.a.useContext(w),i=a.users,l=a.points,u=a.history,d=a.setHistory;return Object(s.jsxs)("header",{className:"header",children:[Object(s.jsxs)("section",{className:"userNameInfo",children:[Object(s.jsxs)("h6",{className:"userName",children:[" ",i.name," "]}),Object(s.jsxs)("button",{className:"button-headerCoins",onClick:function(){return n(!0)},children:[l,Object(s.jsx)("img",{src:k,alt:"coin"})]}),Object(s.jsx)("button",{className:"switch-btn",onClick:function(){return d(!0)},style:{display:u?"none":"block"},children:"Redeems"}),Object(s.jsx)("button",{className:"switch-btn",onClick:function(){return d(!1)},style:{display:u?"block":"none"},children:"Store"})]}),c?Object(s.jsx)(P,{setModal:n}):null,Object(s.jsxs)("section",{className:"container-header",children:[Object(s.jsx)("h6",{className:"title-header",style:{display:u?"none":"block"},children:" Electronics "}),Object(s.jsx)("h6",{className:"title-header",style:{display:u?"block":"none"},children:" History "})]})]})},E=c(5),I=c.p+"static/media/buy-blue.ebf91373.svg";function M(){return(M=Object(f.a)(p.a.mark((function e(t){var c,s;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(m,{method:"POST",headers:l,body:JSON.stringify({productId:t})});case 3:return c=e.sent,e.next=6,c.json();case 6:return s=e.sent,e.abrupt("return",s);case 10:e.prev=10,e.t0=e.catch(0),console.log("Error: ",e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}var A=function(e){return M.apply(this,arguments)},J=c.p+"static/media/emoji-smile.112173de.svg",R=c.p+"static/media/emoji-frown.967e5762.svg";var T=function(e){var t=Object(n.useState)(!1),c=Object(o.a)(t,2),a=c[0],i=c[1],l=Object(n.useState)(""),u=Object(o.a)(l,2),d=u[0],j=u[1],b=r.a.useContext(w),h=b.points,m=b.setPoints;return Object(s.jsxs)("div",{className:"card",onMouseOver:function(){return i(!0)},onMouseLeave:function(){return i(!1)},children:[Object(s.jsx)("img",{src:e.img.url,className:a?"img-hovered card-img-top":"card-img-top",alt:e.name}),Object(s.jsx)("hr",{}),Object(s.jsxs)("div",{className:"card-body",children:[Object(s.jsx)("h6",{className:"card-subtitle mb-2 text-muted",children:e.category}),Object(s.jsx)("h6",{className:"card-title",children:e.name})]}),Object(s.jsx)("button",{type:"button",className:"btn btn-dark",disabled:e.cost>h,onClick:function(){return t=e._id,c=e.cost,A(t).then((function(e){j(e.message),m(h<=0?0:h-c)})),void console.log(d);var t,c},children:"Redeem now"}),a?Object(s.jsx)("div",{className:"card-hovered",children:Object(s.jsxs)("div",{className:"buttons-card-hovered",children:[Object(s.jsx)("img",{className:"buy",src:I,alt:"buy"}),Object(s.jsxs)("h5",{className:"card-cost",children:[" ",e.cost<=h?e.cost:"Missing "+(e.cost-h)," "]}),Object(s.jsx)("img",{className:"coin",src:k,alt:"coin"})]})}):null,"You've redeem the product successfully"===d?Object(s.jsxs)("div",{className:"product-modal",children:[Object(s.jsx)("button",{className:"close",id:"closeSuccessRedeeem",onClick:function(){return j("")},children:" X "}),Object(s.jsxs)("div",{className:"product-modal-div",children:[Object(s.jsx)("img",{className:"emojis-modal",src:J,alt:"success"}),Object(s.jsxs)("h4",{className:"successRedeem",children:[" ",d," "]})]})]}):"undefined"===typeof d?Object(s.jsxs)("div",{className:"product-modal-failed",id:"modal-failed",children:[Object(s.jsx)("button",{className:"close",id:"closeSuccessRedeeem",onClick:function(){return j("")},children:" X "}),Object(s.jsxs)("div",{className:"product-modal-div",children:[Object(s.jsx)("img",{className:"emojis-modal",src:R,alt:"error"}),Object(s.jsx)("h4",{className:"successRedeem",children:" The transaction failed. Please try again later! "})]})]}):null]})};function H(){return(H=Object(f.a)(p.a.mark((function e(){var t,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(h,{method:"GET",headers:l});case 3:return t=e.sent,e.next=6,t.json();case 6:return c=e.sent,e.abrupt("return",c);case 10:e.prev=10,e.t0=e.catch(0),console.log("Error: ",e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}var X=function(){return H.apply(this,arguments)};var Y=function(e,t){var c=Object(n.useState)(1),s=Object(o.a)(c,2),r=s[0],a=s[1],i=Math.ceil(e.length/t),l=e.slice((r-1)*t,r*t);return{next:function(){a(r+1)},prev:function(){a(r-1)},jump:function(e){a(e)},currentData:function(){var c=(r-1)*t,s=c+t;return e.slice(c,s)},currentPage:r,maxPage:i,currentArray:l}},z=c.p+"static/media/arrow-left.f9ecb2d3.svg",D=c.p+"static/media/arrow-right.65a3e00f.svg",F=function(){var e=r.a.useContext(w),t=e.history,c=e.record,n=Y(c,16),a=n.currentArray,i=n.next,o=n.prev,l=n.maxPage,u=n.currentPage;return Object(s.jsxs)("div",{className:"container",children:[Object(s.jsx)("div",{className:"product-history-container",style:{display:t?"flex":"none"},children:a.map((function(e,t){return Object(s.jsxs)("div",{className:"card",style:{width:"18rem"},children:[Object(s.jsx)("img",{src:e.img.url,alt:e.name}),Object(s.jsx)("hr",{}),Object(s.jsxs)("div",{className:"card-body",children:[Object(s.jsx)("h6",{className:"card-subtitle mb-2 text-muted",children:e.category}),Object(s.jsx)("h6",{className:"card-title",children:e.name})]})]},t)}))}),Object(s.jsxs)("section",{className:"arrows",style:{display:t?"flex":"none"},children:[Object(s.jsxs)("h6",{className:"btn-p",children:[" Page ",u," / ",l," "]}),Object(s.jsx)("button",{className:"arrow-btn",onClick:function(){return o()},disabled:u<=1,children:Object(s.jsx)("img",{src:z,alt:"prev"})}),Object(s.jsx)("button",{className:"arrow-btn",onClick:function(){return i()},disabled:u>=l,children:Object(s.jsx)("img",{src:D,alt:"next"})})]})]})},G=function(){var e=r.a.useState([]),t=Object(o.a)(e,2),c=t[0],n=t[1],a=r.a.useState("recent"),i=Object(o.a)(a,2),l=i[0],u=i[1],d=r.a.useState(""),j=Object(o.a)(d,2),b=j[0],h=j[1],m=r.a.useContext(w).history;r.a.useEffect((function(){X().then((function(e){return n(e)}))}),[]);var x=Y(function(){switch(l){case"lowPrice":return c.sort((function(e,t){return parseFloat(e.cost)-parseFloat(t.cost)})).map((function(e,t){return Object(s.jsx)(T,Object(E.a)({},e),t)}));case"highPrice":return c.sort((function(e,t){return parseFloat(t.cost)-parseFloat(e.cost)})).map((function(e,t){return Object(s.jsx)(T,Object(E.a)({},e),t)}));default:return c.sort((function(e,t){return e._id<t._id?-1:1})).map((function(e,t){return Object(s.jsx)(T,Object(E.a)({},e),t)}))}}(),16),O=x.currentArray,p=x.next,f=x.prev,v=x.currentPage,N=x.maxPage;return Object(s.jsxs)("div",{style:{display:m?"none":"block"},className:"container",children:[Object(s.jsxs)("div",{className:"sort-options",children:[Object(s.jsx)("h4",{children:" Sort by: "}),Object(s.jsx)("button",{className:"recent"===b?"sort-option-btn active":"sort-option-btn",onClick:function(){u("recent"),h("recent")},children:" Most Recent "}),Object(s.jsx)("button",{className:"low"===b?"sort-option-btn active":"sort-option-btn",onClick:function(){u("lowPrice"),h("low")},children:" Price: Low to High "}),Object(s.jsx)("button",{className:"high"===b?"sort-option-btn active":"sort-option-btn",onClick:function(){u("highPrice"),h("high")},children:" Price: High to Low "})]}),Object(s.jsx)("hr",{}),Object(s.jsx)("div",{className:"container-cards",children:O}),Object(s.jsx)("div",{style:{display:m?"block":"none"},children:Object(s.jsx)(F,{})}),Object(s.jsx)("hr",{}),Object(s.jsxs)("div",{className:"arrows",children:[Object(s.jsxs)("h6",{className:"btn-p",children:[" Page ",v," / ",N," "]}),Object(s.jsx)("button",{className:"arrow-btn",disabled:v<=1,onClick:function(){return f()},children:Object(s.jsx)("img",{src:z,alt:"prev"})}),Object(s.jsx)("button",{className:"arrow-btn",disabled:v>=N,onClick:function(){return p()},children:Object(s.jsx)("img",{src:D,alt:"next"})})]})]})};c(15);var L=function(){return Object(s.jsx)("div",{className:"App",children:Object(s.jsxs)(C,{children:[Object(s.jsx)(S,{}),Object(s.jsx)(G,{}),Object(s.jsx)(F,{})]})})};i.a.render(Object(s.jsx)(r.a.StrictMode,{children:Object(s.jsx)(L,{})}),document.getElementById("root"))}},[[16,1,2]]]);
//# sourceMappingURL=main.e384d67f.chunk.js.map